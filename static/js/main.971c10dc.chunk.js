(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,a){e.exports={screenViewport:"PdfPlayground_screenViewport__3uFdw",editorArea:"PdfPlayground_editorArea__1M_EA",pdfViewportArea:"PdfPlayground_pdfViewportArea__2gzME"}},31:function(e,t,a){e.exports={dropzone:"PdfLoader_dropzone__2cNmo",inner:"PdfLoader_inner__1fpRF"}},32:function(e,t,a){e.exports={viewport:"PdfViewport_viewport__3i-1V",page:"PdfViewport_page__1djwU"}},33:function(e,t,a){e.exports={toolbar:"Toolbar_toolbar__vOrCc",scale:"Toolbar_scale__WaOdJ"}},62:function(e,t,a){e.exports=a(78)},67:function(e,t,a){},68:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(5),o=a.n(n),r=a(43),c=a.n(r),s=(a(67),a(68),a(7)),i=a.n(s),l=a(16),u=a(9),d=a(10),p=a(12),f=a(11),h=a(13),m=a(24),v=a(60),b=a(61),g=a.n(b),w=a(31),j=a.n(w),O=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(o)))).onFilesChange=function(){var e=Object(l.a)(i.a.mark(function e(t){var n,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("got request to load files:",t),n=t[0],e.next=4,n.arrayBuffer();case 4:o=e.sent,console.log("data:",o),a.props.onLoad(o);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onFilesError=function(e,t){console.warn("error loading files ".concat(t,". error:"),e)},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:j.a.dropzone},o.a.createElement(g.a,{className:j.a.inner,onChange:this.onFilesChange,onError:this.onFilesError,accepts:[".pdf"],clickable:!0,maxFiles:1},"Drop a file here or click to upload"))}}]),t}(n.Component),y=a(28),k=a(27);function E(e){return k.a.getDocument(e).promise}var C=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={docObj:null,data:e.data},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(this.props.data);case 2:t=e.sent,this.setState({docObj:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(l.a)(i.a.mark(function e(t,a){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.data===t.data){e.next=6;break}return console.log("[PdfDoc] updating doc object"),e.next=4,E(this.props.data);case 4:n=e.sent,this.setState({docObj:n,data:this.props.data});case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.children;return null!==this.state.docObj?e(this.state.docObj):null}}]),t}(n.Component);function x(e,t){return e.getPage(t)}var _=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={pageObj:null},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark(function e(){var t,a,n,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.document,n=t.pageNum,e.next=3,x(a,n);case 3:o=e.sent,this.setState({pageObj:o});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(l.a)(i.a.mark(function e(t,a){var n,o,r,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,o=n.document,r=n.pageNum,o===t.document&&r===t.pageNum){e.next=6;break}return e.next=4,x(o,r);case 4:c=e.sent,this.setState({pageObj:c});case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.children;return null!==this.state.pageObj?e(this.state.pageObj):null}}]),t}(n.Component);function D(e,t,a){var n=t.getViewport({scale:a});e.width=n.width,e.height=n.height,t.render({canvasContext:e.getContext("2d"),viewport:n})}var N=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).getMousePos=function(e,t){var n=a.canvasRef.current.getBoundingClientRect();return{x:e-n.left,y:t-n.top}},a.canvasRef=o.a.createRef(),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.page,a=e.scale;D(this.canvasRef.current,t,a)}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.page,a=e.scale;D(this.canvasRef.current,t,a)}},{key:"render",value:function(){var e=this,t=this.props,a=(t.page,t.scale,t.onClick),n=Object(y.a)(t,["page","scale","onClick"]);return a instanceof Function&&(n.onClick=function(t){return e.props.onClick(t,e.getMousePos(t.clientX,t.clientY))}),n.style=n.style||{},n.style.cursor="crosshair",o.a.createElement("canvas",Object.assign({ref:this.canvasRef},n))}}]),t}(n.Component),P=a(32),L=a.n(P);var F=function(e){var t=e.data,a=e.pageNum,n=e.scale,r=e.className,c=e.style,s=Object(y.a)(e,["data","pageNum","scale","className","style"]);return o.a.createElement("div",{className:"".concat(r," ").concat(L.a.viewport),style:c},o.a.createElement("div",{className:L.a.page},null!==t?o.a.createElement(C,{data:t},function(e){return o.a.createElement(_,{document:e,pageNum:a},function(e){return o.a.createElement(N,Object.assign({page:e,scale:n},s))})}):null))},S=a(33),A=a.n(S);var R=function(e){var t=e.disabled,a=e.scale,n=e.onZoomChange,r=e.onDownload,c=e.onLoad;return o.a.createElement("div",{className:A.a.toolbar},o.a.createElement("div",{className:A.a.scale},o.a.createElement("button",{disabled:t,onClick:function(){return n(.1)}},"+"),o.a.createElement("button",{disabled:t,onClick:function(){return n(-.1)}},"-"),o.a.createElement("input",{type:"text",disabled:!0,value:"".concat((100*a).toFixed(0),"%")})),o.a.createElement("button",{disabled:t,onClick:c},"Load"),o.a.createElement("button",{disabled:t,onClick:r},"Download"))},V=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(o)))).onKeyup=function(e){["Escape","Esc"].includes(e.key)&&a.props.onClick()},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keyup",this.onKeyup,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.onKeyup,!1)}},{key:"render",value:function(){return null}}]),t}(n.Component),M=a(29),z=a.n(M),W=1,B=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(o)))).state={data:null,scale:W,showLoadDialog:!0},a.drawRect=function(){var e=Object(l.a)(i.a.mark(function e(t,n){var o,r,c,s,l,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("viewport pos:",[t,n]),e.next=3,m.PDFDocument.load(a.state.data);case 3:return o=e.sent,e.next=6,o.embedFont(m.StandardFonts.Helvetica);case 6:return e.sent,r=o.getPages(),c=r[0],s=c.getSize(),s.width,l=s.height,20,c.drawSquare({x:t/a.state.scale,y:l-n/a.state.scale-20,size:20,borderWidth:2,borderColor:Object(m.grayscale)(.5),color:Object(m.rgb)(.75,.2,.2)}),e.next=14,o.save();case 14:u=e.sent,a.setState({data:u}),console.log("modified loaded");case 17:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.onDownload=function(){var e=new Blob([a.state.data],{type:"application/pdf"});console.log("request to download file accepted",e),Object(v.saveAs)(e,"output.pdf")},a.onPdfLoad=function(e){a.setState({data:e,showLoadDialog:!1,scale:W})},a.onOpenLoadDialog=function(){a.setState({showLoadDialog:!0})},a.onZoomChange=function(e){a.setState(function(t){return{scale:t.scale+e}})},a.onEsc=function(){null!==a.state.data&&!0===a.state.showLoadDialog&&a.setState({showLoadDialog:!1})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return console.log("[playground render] scale:",this.state.scale),o.a.createElement("div",{className:z.a.screenViewport},o.a.createElement(V,{onClick:this.onEsc}),o.a.createElement("h1",null,"PDF Playground"),o.a.createElement("p",null,"Click on the document to add small rectangles to it"),o.a.createElement("div",{className:z.a.editorArea},o.a.createElement(R,{disabled:null===this.state.data,scale:this.state.scale,onZoomChange:this.onZoomChange,onDownload:this.onDownload,onLoad:this.onOpenLoadDialog}),o.a.createElement("div",{className:z.a.pdfViewportArea},this.state.showLoadDialog?o.a.createElement(O,{onLoad:this.onPdfLoad}):null,o.a.createElement(F,{data:this.state.data,pageNum:1,scale:this.state.scale,onClick:function(t,a){var n=a.x,o=a.y;return e.drawRect(n,o)}}))))}}]),t}(n.Component);var U=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(B,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));k.a.GlobalWorkerOptions.workerSrc="https://cdn.jsdelivr.net/npm/pdfjs-dist@2.1.266/build/pdf.worker.min.js",c.a.render(o.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[62,1,2]]]);
//# sourceMappingURL=main.971c10dc.chunk.js.map